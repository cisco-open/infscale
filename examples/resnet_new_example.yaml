name: resnet152_example
model: microsoft/resnet-152
nfaults: 1
micro_batch_size: 128
fwd_policy: rr
job_id: job1
max_inflight: 4
warmup: 8  # number of warmup batches
max_count: 200  # number of actual batches to run
flow_graph:
  s-0:
  - name: w0
    addr: 127.0.0.1
    port: 29500
    peers: [0-0]
    backend: nccl
  - name: w1
    addr: 127.0.0.1
    port: 30500
    peers: [0-1]
    backend: nccl
  0-0:
  - name: w2
    addr: 127.0.0.1
    port: 31500
    peers: [s-0]
    backend: nccl
  0-1:
  - name: w3
    addr: 127.0.0.1
    port: 32500
    peers: [s-0]
    backend: nccl
rank_map:
  s-0: 0
  0-0: 1
  0-1: 2
dataset:
  path: cifar10
  name: ''
  split: test
workers:
- id: s-0
  device: cuda:0
  stage:
    start: -1
    end: -1
    is_server: true
- id: 0-0
  device: cuda:1
  stage:
    start: 0
    end: 51
- id: 0-1
  device: cuda:2
  stage:
    start: 0
    end: 51
